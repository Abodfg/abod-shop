# ๐ค ุฏููู ุฅุนุฏุงุฏุงุช ุงูุจูุช ุงูุดุงูู - Abod Shop

## ๐ ุงููุญุชููุงุช
1. [ุฅุนุฏุงุฏุงุช ุงูุจูุช ุงูุฃุณุงุณูุฉ](#basic-settings)
2. [ุชุนุฏูู ุนุจุฑ BotFather](#botfather)
3. [ุฃุฏูุงุช ุงูุญูุงูุฉ ุงููุชูุฏูุฉ](#security-tools)
4. [ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู](#backup)

---

## ๐ฏ ุฅุนุฏุงุฏุงุช ุงูุจูุช ุงูุฃุณุงุณูุฉ {#basic-settings}

### ูุนูููุงุช ุงูุจูุชุงุช ุงูุญุงููุฉ

#### ุจูุช ุงููุณุชุฎุฏู (User Bot)
```
Token: 8270585864:AAHcUrFnCX7nYcnAKXdlymtzZXHXghDGW-o
Username: @YourUserBotName (ูู ุจุชุญุฏูุซู)
Webhook: https://digital-shop-bot-1.preview.emergentagent.com/api/webhook/user/abod_user_webhook_secret
```

#### ุจูุช ุงูุฅุฏุงุฑุฉ (Admin Bot)
```
Token: 7835622090:AAGLTeEv-zUdNNkUrkS_L_FCd3zSUOosVeU
Username: @YourAdminBotName (ูู ุจุชุญุฏูุซู)
Webhook: https://digital-shop-bot-1.preview.emergentagent.com/api/webhook/admin/abod_admin_webhook_secret
```

---

## ๐๏ธ ุชุนุฏูู ุนุจุฑ BotFather {#botfather}

### ุงูุฎุทูุฉ 1: ุงูุชุญ ูุญุงุฏุซุฉ ูุน @BotFather

1. ุงุจุญุซ ุนู `@BotFather` ูู Telegram
2. ุงุถุบุท Start
3. ุณุชุธูุฑ ูู ูุงุฆูุฉ ุงูุฃูุงูุฑ

---

### ุงูุฎุทูุฉ 2: ุชุบููุฑ ุงุณู ุงูุจูุช

#### ููุจูุช ุงูุฑุฆูุณู (User Bot):
```
1. ุฃุฑุณู: /setname
2. ุงุฎุชุฑ ุงูุจูุช ูู ุงููุงุฆูุฉ
3. ุฃุฑุณู ุงูุงุณู ุงูุฌุฏูุฏ: Abod Shop
```

#### ููุจูุช ุงูุฅุฏุงุฑู (Admin Bot):
```
1. ุฃุฑุณู: /setname
2. ุงุฎุชุฑ ุงูุจูุช ุงูุฅุฏุงุฑู
3. ุฃุฑุณู: Abod Shop Admin
```

---

### ุงูุฎุทูุฉ 3: ุชุบููุฑ ูุตู ุงูุจูุช (Description)

#### ูุตู ุจูุช ุงููุณุชุฎุฏู:
```
1. ุฃุฑุณู: /setdescription
2. ุงุฎุชุฑ ุงูุจูุช
3. ุฃุฑุณู ุงููุต ุงูุชุงูู:

๐๏ธ ูุชุฌุฑ Abod Shop - ูุชุฌุฑู ุงูุฑููู ุงูุดุงูู

ููุฏู ูู:
๐ฎ ุดุญู ุงูุฃูุนุงุจ ุงูุฅููุชุฑูููุฉ
๐ ุจุทุงูุงุช ุงููุฏุงูุง ุงูุฑูููุฉ  
๐ ุฎุฏูุงุช ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ
๐ฑ ุงูุงุดุชุฑุงูุงุช ุงูุฑูููุฉ ุงููุชููุนุฉ

โจ ูููุฒุงุช ูุชุฌุฑูุง:
โข ุฏูุน ุขูู ูุณุฑูุน ๐ฐ
โข ุฎุฏูุฉ ุนููุงุก ูุชุงุญุฉ 24/7 โก
โข ุฃุณุนุงุฑ ุชูุงูุณูุฉ ูุนุฑูุถ ุญุตุฑูุฉ ๐ฅ
โข ุชูุตูู ููุฑู ููุฃููุงุฏ ๐ฒ

๐ ููุซูู ูุขูู 100%
๐ ููุฏุนู: @AbodStoreVIP
```

#### ูุตู ุจูุช ุงูุฅุฏุงุฑุฉ:
```
1. ุฃุฑุณู: /setdescription
2. ุงุฎุชุฑ ุจูุช ุงูุฅุฏุงุฑุฉ
3. ุฃุฑุณู:

๐ ููุญุฉ ุชุญูู Abod Shop ุงูุฅุฏุงุฑูุฉ

ุจูุช ุฎุงุต ููุฅุฏุงุฑุฉ ููุท
โ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ูุงููุฆุงุช
โ ุฅุฏุงุฑุฉ ุงูุทูุจุงุช ูุงููุณุชุฎุฏููู
โ ุฅุฏุงุฑุฉ ุงููุญุงูุธ ูุงููุฏููุนุงุช
โ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช

โ๏ธ ูุตูู ูุญุฏูุฏ ููุฅุฏุงุฑููู ุงููุตุฑุญ ููู ููุท
```

---

### ุงูุฎุทูุฉ 4: ุชุบููุฑ ุงููุตู ุงููุตูุฑ (About Text)

#### ููุจูุช ุงูุฑุฆูุณู:
```
1. ุฃุฑุณู: /setabouttext
2. ุงุฎุชุฑ ุงูุจูุช
3. ุฃุฑุณู:

โก Abod Shop - ูุชุฌุฑู ุงูุฑููู ุงููุชูุงูู
๐ฎ ุดุญู ุฃูุนุงุจ | ๐ ุจุทุงูุงุช ูุฏุงูุง | ๐ณ ุฎุฏูุงุช ุฑูููุฉ
๐ ุขูู ูููุซูู | โก ุชูุตูู ููุฑู
```

#### ููุจูุช ุงูุฅุฏุงุฑู:
```
1. ุฃุฑุณู: /setabouttext
2. ุงุฎุชุฑ ุจูุช ุงูุฅุฏุงุฑุฉ
3. ุฃุฑุณู:

๐ Abod Shop - ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ
โ ููุฅุฏุงุฑููู ุงููุตุฑุญ ููู ููุท
```

---

### ุงูุฎุทูุฉ 5: ุฅุถุงูุฉ ุตูุฑุฉ ููุจูุช

```
1. ุฃุฑุณู: /setuserpic
2. ุงุฎุชุฑ ุงูุจูุช
3. ุฃุฑุณู ุตูุฑุฉ ุงูุดุนุงุฑ (ููุถู 512x512 px)
```

**ููุงุตูุงุช ุงูุตูุฑุฉ ุงูููุตู ุจูุง:**
- ุงูุญุฌู: 512x512 ุจูุณู
- ุงูุตูุบุฉ: PNG (ูุน ุฎูููุฉ ุดูุงูุฉ)
- ุงูุญุฌู: ุฃูู ูู 5 ููุฌุงุจุงูุช

---

### ุงูุฎุทูุฉ 6: ุฅุถุงูุฉ ุฃูุงูุฑ ุงูุจูุช

#### ุฃูุงูุฑ ุจูุช ุงููุณุชุฎุฏู:
```
1. ุฃุฑุณู: /setcommands
2. ุงุฎุชุฑ ุงูุจูุช
3. ุฃุฑุณู:

start - ุจุฏุก ุงูุจูุช ูุนุฑุถ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
menu - ุนุฑุถ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
search - ุงูุจุญุซ ุนู ููุชุฌ
wallet - ุนุฑุถ ุงููุญูุธุฉ ูุงูุฑุตูุฏ
orders - ุนุฑุถ ุทูุจุงุชู ุงูุณุงุจูุฉ
support - ุงูุชูุงุตู ูุน ุงูุฏุนู ุงูููู
help - ุงููุณุงุนุฏุฉ ูุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ
```

#### ุฃูุงูุฑ ุจูุช ุงูุฅุฏุงุฑุฉ:
```
1. ุฃุฑุณู: /setcommands
2. ุงุฎุชุฑ ุจูุช ุงูุฅุฏุงุฑุฉ
3. ุฃุฑุณู:

start - ูุชุญ ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ
products - ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
users - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
orders - ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
wallet - ุฅุฏุงุฑุฉ ุงููุญุงูุธ
reports - ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช
payments - ุทุฑู ุงูุฏูุน
```

---

### ุงูุฎุทูุฉ 7: ุชูุนูู Inline Mode (ุงุฎุชูุงุฑู)

```
1. ุฃุฑุณู: /setinline
2. ุงุฎุชุฑ ุงูุจูุช
3. ุฃุฑุณู: Enable
4. (ุงุฎุชูุงุฑู) ูู ุจุชุนููู placeholder text
```

---

### ุงูุฎุทูุฉ 8: ุชูุนูู ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ

#### ุชูุนูู WebApp Button:
```
โ ุชู ุชูุนููู ุจุงููุนู ูู ุงูููุฏ
ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ
```

#### ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ:
```
1. ุฃุฑุณู: /setjoingroups
2. ุงุฎุชุฑ Disable (ูููุน ุฅุถุงูุฉ ุงูุจูุช ูููุฌููุนุงุช)
```

---

## ๐ ุฃุฏูุงุช ุงูุญูุงูุฉ ุงููุชูุฏูุฉ {#security-tools}

### 1. Rate Limiting

ุชู ุชุทุจูู Rate Limiting ูู ุงูููุฏ:
```python
# ูุญุงููุงุช webhook ุบูุฑ ุตุงูุญุฉ ูุชู ุชุณุฌูููุง
logging.warning(f"Invalid webhook secret attempt from {request.client.host}")
```

**ููููุฉ ูุฑุงูุจุฉ ุงููุญุงููุงุช ุงููุดุจููุฉ:**
```bash
# ุนุฑุถ ุขุฎุฑ 100 ูุญุงููุฉ ูุดุจููุฉ
tail -n 100 /var/log/supervisor/backend.err.log | grep "Invalid webhook"
```

---

### 2. IP Whitelisting

**ูุทุงูุงุช IP ุงููุณููุญุฉ (Telegram):**
```python
149.154.160.0/20
91.108.4.0/22
91.108.56.0/22
```

**ููููุฉ ุชุดุฏูุฏ ุงูุญูุงูุฉ (ุงุฎุชูุงุฑู):**
ูู ููู `/app/backend/server.py` ูู ุจุฅุฒุงูุฉ ุงูุชุนููู ูู:
```python
if not any(client_ip.startswith(range_prefix) for range_prefix in allowed_ranges):
    logging.warning(f"Webhook request from unauthorized IP: {client_ip}")
    raise HTTPException(status_code=403, detail="Unauthorized IP")
```

---

### 3. Webhook Secret Rotation

**ููููุฉ ุชุบููุฑ Webhook Secrets:**

1. ูู `/app/backend/server.py` ุบููุฑ:
```python
# ุงูุณุทุฑ ~971
if secret != "new_user_webhook_secret_2024":  # ุบููุฑ ููุง

# ุงูุณุทุฑ ~1008
if secret != "new_admin_webhook_secret_2024":  # ุบููุฑ ููุง
```

2. ูู `/app/backend/server.py` ุญุฏูุซ URLs:
```python
# ุงูุณุทุฑ ~6321
url="https://digital-shop-bot-1.preview.emergentagent.com/api/webhook/user/new_user_webhook_secret_2024"

# ุงูุณุทุฑ ~6326
url="https://digital-shop-bot-1.preview.emergentagent.com/api/webhook/admin/new_admin_webhook_secret_2024"
```

3. ุฃุนุฏ ุชุดุบูู Backend:
```bash
sudo supervisorctl restart backend
```

4. ุฃุนุฏ ุชุณุฌูู Webhooks:
```bash
curl -X POST "https://digital-shop-bot-1.preview.emergentagent.com/api/set-webhooks"
```

---

### 4. Token Security

**ุงูุฃูุงู ุงูุญุงูู:**
โ Tokens ูุญููุธุฉ ูู ุงูููุฏ (ููุงุณุจ ููุชุทููุฑ)

**ุชุญุณูู ุงูุฃูุงู (ููุฅูุชุงุฌ):**

1. ุงููู Tokens ุฅูู `.env`:
```bash
# ูู /app/backend/.env ุฃุถู:
USER_BOT_TOKEN=8270585864:AAHcUrFnCX7nYcnAKXdlymtzZXHXghDGW-o
ADMIN_BOT_TOKEN=7835622090:AAGLTeEv-zUdNNkUrkS_L_FCd3zSUOosVeU
```

2. ูู `server.py` ุงุณุชุฎุฏู:
```python
import os
USER_BOT_TOKEN = os.getenv("USER_BOT_TOKEN")
ADMIN_BOT_TOKEN = os.getenv("ADMIN_BOT_TOKEN")
```

---

### 5. ุญูุงูุฉ ุญุณุงุจ Telegram ุงูุดุฎุตู

#### ุชูุนูู ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ (2FA):
```
1. Telegram > Settings > Privacy and Security
2. Two-Step Verification > Set Additional Password
3. ุฃุฏุฎู ูููุฉ ูุฑูุฑ ูููุฉ
4. ุฃุถู ุจุฑูุฏ ุฅููุชุฑููู ููุงุณุชุฑุฏุงุฏ
5. ุงุญูุธ ุงููููุฉ ูู ููุงู ุขูู
```

#### ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช:
```
1. Settings > Devices > Active Sessions
2. ุฑุงุฌุน ุฌููุน ุงูุฃุฌูุฒุฉ ุงููุชุตูุฉ
3. ุงุญุฐู ุฃู ุฌูุงุฒ ุบูุฑ ูุนุฑูู
4. ูุนูู "Terminate all other sessions"
```

#### ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ ุงูููุตู ุจูุง:
```
Settings > Privacy and Security:
โ Phone Number: Nobody
โ Last Seen & Online: Nobody  
โ Profile Photo: My Contacts
โ Forwards: Nobody
โ Calls: My Contacts
โ Groups & Channels: My Contacts
โ Voice Messages: Enabled (but restrict to contacts)
```

---

## ๐พ ุงุณุชุฑุงุชูุฌูุฉ ุงููุณุฎ ุงูุงุญุชูุงุทู {#backup}

### 1. ูุณุฎ ุงุญุชูุงุทู ูููู

**ุฅูุดุงุก ุณูุฑูุจุช backup:**
```bash
#!/bin/bash
# /app/scripts/daily_backup.sh

DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backup"

# ูุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช
mongodump --db test_database --out "$BACKUP_DIR/mongo_$DATE"

# ูุณุฎ ุงูููุฏ
cp -r /app/backend "$BACKUP_DIR/backend_$DATE"
cp -r /app/frontend/public "$BACKUP_DIR/frontend_$DATE"

# ุถุบุท ุงููููุงุช
tar -czf "$BACKUP_DIR/backup_$DATE.tar.gz" "$BACKUP_DIR/mongo_$DATE" "$BACKUP_DIR/backend_$DATE" "$BACKUP_DIR/frontend_$DATE"

# ุญุฐู ุงููููุงุช ุงููุฏููุฉ (ุฃูุซุฑ ูู 7 ุฃูุงู)
find "$BACKUP_DIR" -name "backup_*.tar.gz" -mtime +7 -delete

echo "Backup completed: backup_$DATE.tar.gz"
```

**ุฌุฏููุฉ Backup ููููุงู:**
```bash
# ุชุญุฑูุฑ crontab
crontab -e

# ุฅุถุงูุฉ ุงูุณุทุฑ ุงูุชุงูู (backup ูู ููู ุงูุณุงุนุฉ 3 ุตุจุงุญุงู)
0 3 * * * /app/scripts/daily_backup.sh >> /var/log/backup.log 2>&1
```

---

### 2. ุงุณุชุนุงุฏุฉ ูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

```bash
# ูู ุถุบุท ุงูููู
tar -xzf backup_20250124_030000.tar.gz

# ุงุณุชุนุงุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
mongorestore --db test_database mongo_20250124_030000/test_database

# ุงุณุชุนุงุฏุฉ ุงูููุฏ
cp -r backend_20250124_030000/* /app/backend/
cp -r frontend_20250124_030000/* /app/frontend/public/

# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุฏูุงุช
sudo supervisorctl restart all
```

---

## ๐ ุงููุฑุงูุจุฉ ูุงูุชูุจููุงุช

### 1. ูุฑุงูุจุฉ ุงูุณุฌูุงุช

```bash
# ูุฑุงูุจุฉ Errors ูู ุงูููุช ุงููุนูู
tail -f /var/log/supervisor/backend.err.log | grep ERROR

# ุนุฑุถ ุขุฎุฑ 100 ุฎุทุฃ
tail -n 100 /var/log/supervisor/backend.err.log | grep ERROR

# ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช
tail -n 1000 /var/log/supervisor/backend.err.log | grep "webhook" | wc -l
```

---

### 2. ูุฑุงูุจุฉ ุงูุฃุฏุงุก

```bash
# ุงูุชุญูู ูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ
ps aux | grep python

# ุงูุชุญูู ูู ุงุณุชุฎุฏุงู CPU
top -p $(pgrep -f "uvicorn")

# ุญุงูุฉ ุงูุฎุฏูุงุช
sudo supervisorctl status
```

---

## ๐จ ุฎุทุฉ ุงูุทูุงุฑุฆ

### ูู ุญุงูุฉ ุงุฎุชุฑุงู ูุญุชูู:

#### 1. ุฅููุงู ุงูุจูุช ููุฑุงู
```bash
sudo supervisorctl stop backend
```

#### 2. ุชุบููุฑ Bot Tokens
```
1. ุงูุชุญ @BotFather
2. ุฃุฑุณู: /revoke
3. ุงุฎุชุฑ ุงูุจูุช ุงููุฎุชุฑู
4. ุณูุชู ุฅูุดุงุก Token ุฌุฏูุฏ
5. ุญุฏูุซ ุงูููุฏ ุจุงูู Token ุงูุฌุฏูุฏ
```

#### 3. ุชุบููุฑ Webhook Secrets
```python
# ูู server.py ุบููุฑ:
USER_WEBHOOK_SECRET = "new_emergency_secret_" + str(time.time())
ADMIN_WEBHOOK_SECRET = "new_emergency_admin_" + str(time.time())
```

#### 4. ูุฑุงุฌุนุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงูุจุญุซ ุนู ุชุนุฏููุงุช ูุดุจููุฉ
mongo test_database --eval "db.users.find().sort({_id:-1}).limit(10).pretty()"
mongo test_database --eval "db.orders.find().sort({_id:-1}).limit(10).pretty()"
```

#### 5. ุงุณุชุนุงุฏุฉ ูู Backup
```bash
# ุฅุฐุง ูุฒู ุงูุฃูุฑ
mongorestore --db test_database backup_latest/test_database
```

#### 6. ุชุบููุฑ ุฌููุน ูููุงุช ุงููุฑูุฑ
- MongoDB password
- Server SSH password
- Telegram 2FA

---

## โ Checklist ุงูุฃูุงู ุงูุดุงูู

### ุฅุนุฏุงุฏุงุช ุงูุจูุช:
- [ ] ุชู ุชุนููู ุงุณู ุงูุจูุช
- [ ] ุชู ุชุนููู ุงููุตู ุงููุงูู
- [ ] ุชู ุชุนููู ุงููุตู ุงููุตูุฑ
- [ ] ุชู ุฑูุน ุตูุฑุฉ ุงูุจูุช
- [ ] ุชู ุฅุถุงูุฉ ุงูุฃูุงูุฑ
- [ ] ุชู ุชุนุทูู Join Groups

### ุงูุญูุงูุฉ:
- [ ] Webhook Secrets ูุฑูุฏุฉ ููููุฉ
- [ ] IP Whitelisting ููุนู (ุงุฎุชูุงุฑู)
- [ ] Rate Limiting ูุทุจู
- [ ] Logging ููุฃุญุฏุงุซ ุงููุดุจููุฉ
- [ ] Tokens ูู ููู .env (ููุฅูุชุงุฌ)

### ุญุณุงุจ Telegram ุงูุดุฎุตู:
- [ ] 2FA ููุนู
- [ ] ูุฑุงุฌุนุฉ Active Sessions
- [ ] ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ ูุญุฏุซุฉ
- [ ] ุจุฑูุฏ ุงุณุชุฑุฏุงุฏ ูุถุงู

### ุงููุณุฎ ุงูุงุญุชูุงุทู:
- [ ] Backup ูููู ูุฌุฏูู
- [ ] ุงุฎุชุจุงุฑ ุงุณุชุนุงุฏุฉ Backup
- [ ] ุชุฎุฒูู Backups ูู ููุงู ุขูู

### ุงููุฑุงูุจุฉ:
- [ ] ูุฑุงูุจุฉ ุงูุณุฌูุงุช ููููุงู
- [ ] ุชูุจููุงุช ููุฃุฎุทุงุก
- [ ] ูุฑุงูุจุฉ ุงูุฃุฏุงุก

---

## ๐ ูุนูููุงุช ุงูุฏุนู

**ููุทูุงุฑุฆ ุงูุฃูููุฉ:**
- ุฑุงุฌุน ุงูุณุฌูุงุช ููุฑุงู
- ุงุชุจุน ุฎุทุฉ ุงูุทูุงุฑุฆ
- ูุซูู ุฌููุน ุงูุฎุทูุงุช

**ูููุณุงุนุฏุฉ ุงููููุฉ:**
- Telegram: @AbodStoreVIP
- ุฑุงุฌุน `/app/BOT_SECURITY_SETTINGS_GUIDE.md`

---

*ุขุฎุฑ ุชุญุฏูุซ: 2025-10-24*
*ุงูุฅุตุฏุงุฑ: 2.0 - ุดุงูู ููุญุฏูุซ*
*ุชู ุฅุฒุงูุฉ ุฌููุน ุงูุฅุดุงุฑุงุช ูููุฌูู - ูุธุงู ุงูุฏููุงุฑ ููุท*
